set $mod Mod4
set $left  h
set $down  j
set $up    k
set $right l
set $cursor_theme "Adwaita"
set $script $HOME/.config/sway

exec "systemctl --user import-environment; systemctl --user start sway-session.target"

# output * bg "#000000" solid_color
output * bg $HOME/Pictures/scp_wallpaper_1.jpg fill

# output * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill
#
# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

floating_modifier $mod

bindsym --to-code {
	$mod+Return exec alacritty
	$mod+Shift+Return exec alacritty \
		--working-directory $(cat /tmp/last_pwd 2>/dev/null || echo ~)

	$mod+Shift+q kill
	$mod+Shift+c reload

	$mod+$left focus left
	$mod+$down focus down
	$mod+$up focus up
	$mod+$right focus right

	$mod+Shift+$left  move left
	$mod+Shift+$down  move down
	$mod+Shift+$up    move up
	$mod+Shift+$right move right


	$mod+Bracketleft  workspace prev
	$mod+Bracketright workspace next

	$mod+Shift+Bracketleft exec $script/workspace-switch.sh prev
	$mod+Shift+Bracketright exec $script/workspace-switch.sh next

	$mod+Control+Up    exec $script/push-window.sh top
	$mod+Control+Right exec $script/push-window.sh right
	$mod+Control+Down  exec $script/push-window.sh bottom
	$mod+Control+Left  exec $script/push-window.sh left

	$mod+c move position center
}

bindsym {
	$mod+p exec env -u XDG_CURRENT_DESKTOP rofi -i -show drun
	$mod+i exec $script/rofi-window-switch.sh

	$mod+Shift+e exec swaynag \
		-t warning \
		-m "You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session." \
		-b "Yes, exit sway" \
		"swaymsg exit"
#
	$mod+1 workspace number 1
	$mod+2 workspace number 2
	$mod+3 workspace number 3
	$mod+4 workspace number 4
	$mod+5 workspace number 5
	$mod+6 workspace number 6
	$mod+7 workspace number 7
	$mod+8 workspace number 8
	$mod+9 workspace number 9
	$mod+0 workspace number 10
	$mod+Tab workspace back_and_forth

	$mod+Shift+1 move container to workspace number 1
	$mod+Shift+2 move container to workspace number 2
	$mod+Shift+3 move container to workspace number 3
	$mod+Shift+4 move container to workspace number 4
	$mod+Shift+5 move container to workspace number 5
	$mod+Shift+6 move container to workspace number 6
	$mod+Shift+7 move container to workspace number 7
	$mod+Shift+8 move container to workspace number 8
	$mod+Shift+9 move container to workspace number 9
	$mod+Shift+0 move container to workspace number 10

	$mod+b splith
	$mod+v splitv

	$mod+s layout stacking
	$mod+w layout tabbed
	$mod+e layout toggle split

	--release $mod+f fullscreen

	$mod+Shift+f floating toggle

	$mod+a focus parent
	$mod+Control+a focus child

	$mod+Shift+minus move scratchpad
	$mod+minus scratchpad show
}

bindsym $mod+r mode "resize"
mode "resize" bindsym {
	$left  resize shrink width  20px
	$down  resize grow   height 20px
	$up    resize shrink height 20px
	$right resize grow   width  20px

	# Return to default mode
	Return mode "default"
	Escape mode "default"
}

bar {
	# status_command $HOME/.config/sway/mybar.sh
	# status_command i3status-rs $HOME/.config/i3status-rust/config.toml
	swaybar_command waybar
	# swaybar_command swaybar
	# swaybar_command /home/kraftwerk28/projects/sway/Waybar/build/waybar
	# status_command while true; do date +"%x %X"; sleep 1; done
	font Hack Bold 11
	position top
	icon_theme "Papirus"
}

input type:pointer {
	accel_profile flat
}

input type:keyboard {
	xkb_layout "us,ua"
	xkb_options "grp:win_space_toggle,caps:escape_shifted_capslock"
	repeat_delay 300
	repeat_rate 25
}

input type:touchpad {
	tap enabled
	natural_scroll enabled
	click_method clickfinger
}

include /etc/sway/config.d/*

# Various multimedia keys
bindsym {
	XF86AudioRaiseVolume  exec $script/volume-control.sh up
	XF86AudioLowerVolume  exec $script/volume-control.sh down
	XF86AudioMute         exec $script/volume-control.sh toggle
	Control+XF86AudioMute exec $script/volume-control.sh toggle-mic

	XF86MonBrightnessDown exec \
		[[ $(brightnessctl g) -gt 6000 ]] && brightnessctl set 5%-
	XF86MonBrightnessUp exec brightnessctl set +5%

	XF86AudioPlay exec playerctl play-pause
	XF86AudioNext exec playerctl next
	XF86AudioPrev exec playerctl previous

	Print         exec grimshot --notify copy area
	Shift+Print   exec grimshot --notify copy window
	Control+Print exec grimshot --notify copy screen
}

smart_borders on
smart_gaps on
# gaps inner 4
# gaps outer 0
default_border pixel 2

focus_wrapping off
focus_follows_mouse no

# client.focused_inactive "#ff8800" "#884400" "#ffffff" "#ff4400" "#ff8800"
client.focused          "#ff8800" "#884400" "#ffffff" "#ff4400" "#ff8800"
client.focused_inactive "#666666" "#222222" "#ffffff" "#444444" "#666666"
client.unfocused        "#666666" "#222222" "#ffffff" "#444444" "#666666"

font Iosevka Term Extended Bold 10
# font Hack Nerd Font Bold 10
titlebar_padding 4 1

seat * xcursor_theme $cursor_theme
exec_always gsettings set org.gnome.desktop.interface cursor-theme $cursor_theme
exec_always sed -i -r \
	's/^Inherits=.+/Inherits='$cursor_theme'/' \
	~/.icons/default/index.theme

exec {
	mako
	blueman-applet
	kdeconnect-indicator
	$script/keyboard_layout_per_window.lua
}

# Autostart apps
exec swaymsg "               \
	workspace 4;             \
	exec firefox;            \
	workspace 5;             \
	layout tabbed;           \
	exec kotatogram-desktop; \
	exec slack;              \
	exec discord;            \
	exec mattermost-desktop; "

# exec swayidle -w \
# 	# timeout 300 'swaylock -f -c 000000' \
# 	timeout 6 'swaymsg "output * dpms off"' \
# 	resume 'swaymsg "output * dpms on"'
# 	# before-sleep 'swaylock -f -c 000000'

for_window [app_id="firefox" title="^Picture-in-Picture$"] \
	floating enable; \
	sticky enable; \
	border pixel
for_window [app_id="firefox" title="Sharing Indicator"] \
	floating enable; \
	sticky enable
for_window [app_id="pavucontrol"] floating enable
for_window [title="QjackCtl"] floating enable
for_window [title="Guitarix"] floating enable

# bindsym --release Alt+R exec notify-send foo
# bindsym $mod+Shift+r exec wf-recorder

# bindswitch lid:toggle exec swaylock \
# 	--image $HOME/Pictures/scp_wallpaper_1.jpg \
# 	--font "Hack Bold" \
# 	--indicator-radius 96 \
# 	--indicator-thickness 16 \
# 	--scaling fill \
# 	--ring-color "00000000" \
# 	--key-hl-color "ffffff" \
# 	--inside-color "000000"

# vim: ft=config
